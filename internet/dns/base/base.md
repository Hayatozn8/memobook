<span id="catalog"></span>

### 目录
- [什么是DNS](#什么是DNS)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)
- [](#)


# 什么是DNS
[top](#catalog)
- DNS：domain name system，域名解析器
- DNS的本质
    - DNS类似与一个电话本、或一个键值数据库
    - key是名字/网址/域名，value是其在网络中的IP地址
    - 需要IP时，可以通过名字来获取
    
- 为什么需要DNS
    - 前提
        1. 对于电脑，使用**IP地址**识别网络中的一台服务器/主机
        2. 对于人，使用**有意义的名字：域名/网址**识别网络中的一台服务器/主机
    - 为了在人与电脑之间建立沟通的桥梁，通过DNS将**名字转换成IP地址**
    - 有了DNS，当在浏览器中输入一个网址时，DNS会**把网址转换成IP地址**，通过IP地址就可以与网络上的主机进行交互了

- DNS解析过程中的几种节点/服务器
    1. 浏览器或者操作系统
        - 浏览器或者操作系统会将曾经访问过的网址与IP缓存
        - 如果搜索不到IP，会向 解析服务器 发送请求
    
    2. 解析服务器，resolver server
        - 网络供应商
        - 如果搜索不到IP，会向 根域名解析器 发送请求

    3. 根域名解析器（root server）
        - 根域名解析器是DNS体系中最顶级、最基础的
        - 全世界一共有13组根域名服务器，分别在世界各地，由12个不同的组织管理
        - 每个根域名服务器都有独特的IP地址
        - 根域名服务器实际不保存IP，但是它知道每种域名保存在哪个 顶级服务器中
        - 根域名服务器会将 顶级服务器 的IP地址发送给 解析服务器，使其重新搜索
    
    4. 顶级域名服务器 （TLD/top-level ）
        - 顶级域名服务器存储了顶级域名的IP信息
        - 如：.com/.net/.org 这一TLD服务器负责管理 .com/.net/.org 这三种域名
        - 如果搜索不到IP，会将主域名服务器的IP地址发送给 解析服务器，使其重新搜索

    5. 主域名服务器（authoritative name servers）
        - 主域名服务器是整个DNS所搜中的**最后一级**
        - 主域名服务器 负责已保存的每一个域名包含的地址


- DNS基本解析步骤
    1. 在浏览器输入网址，如： `abcd.com`

    2. 浏览器或者操作系统收到IP查询请求，到缓存中查找 `abcd.com` 对应的 IP地址
        - 如果有，直接使用
        - 如果没有，向下一级发送请求，即解析服务器（resolver server）

    3. 解析服务器收到 IP 查询请求，到缓存中查找 `abcd.com` 对应的 IP地址
        - 如果有，将网址对应的 IP 返回用户
        - 如果没有，继续向下一级发送请求，即根域名解析器（root server）
        - 如果从下一级服务器中获得了IP地址，则将 网址 与 IP 保存到缓存中，下一次访问就可以直接使用，不用再进行多级请求

    4. 根域名服务器收到 IP 查询请求，分析 `abcd.com` 网址，将保存 `.com` 域名的 顶级域名服务器 的IP地址发送给解析服务器，使其重新搜索

    5. 负责`.com`域名的顶级服务器收到 IP 查询请求，缓存中查找`abcd.com` 对应的 IP 地址
        - 如果找到，将 IP地址 返回解析服务器，再返回给用户
        - 如果没找到，将 主域名服务器 的 IP地址 发送给 解析服务器，使其重新搜索
    
    6. 主域名服务器收到 IP 查询请求，到缓存中查找`abcd.com` 对应的 IP地址
        - 如果找到，将 IP地址 返回解析服务器，再返回用户
        - 如果没找到，则网址有误，搜索失败

- DNS基本解析步骤的流程图
    ```
    ┌──────────────┐   网址的IP / 顶级服务器的IP
    │ 根域名服务器  ├──────────────────────────────────────┐
    │ root server  │ <<<─────────────────────────────┐    │
    └──────────────┘      IP的搜索请求                │    │
                                                     │    │
                                                     │    │
                                                     │    V
    ┌──────────────┐　 网址IP / 主域名服务器IP　　┌────┴──────────┐
    │  顶级服务器　 ├─────────────────────────>>>│   解析服务器   │ <<─── 浏览器 <<── abcd.com
    │TLD/top-level │ <<<────────────────────────┤resolver server│
    └──────────────┘      IP的搜索请求           └─────────┬─────┘
                                                     ^    │
                                                     ^    │
                                                     │    │
    ┌──────────────┐   网址IP / IP搜索失败            │    │
    │ 主域名服务器  ├─────────────────────────────────┘    │
    │authoritative-│ <<<──────────────────────────────────┘
    │name servers  │      IP的搜索请求
    └──────────────┘
    ```

- 访问示例
    - 通过地址访问百度：https://www.baidu.com/
    - 通过IP 访问百度(在浏览器中输入IP)：http://61.135.169.125/
