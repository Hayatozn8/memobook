<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>deconstruct test</title>
        <script type="text/javascript">
            // 1. 对象的解构
            // 1.1 完全匹配
            let {gender, name, age} = {name:"aaa_name", age:20, gender:true}
            console.log("name =", name)         // name = aaa_name
            console.log("age =", age)           // age = 20
            console.log("gender =", gender)     // gender = true

            // 1.2 部分匹配
            let {price, address} = {price:60, address:"qqqwwweee", school:"xxxx"}
            console.log("price =", price)       // price = 60
            console.log("address =", address)   // address = qqqwwweee

            // 1.3 只匹配一个
            let {one} = {one: "oneStr", two:"twoStr"}
            console.log("one =", one)           // one = oneStr

            // 1.4 匹配对象中不存在的匹配项
            let {first, second, third} = {first:"firstStr", second:"secondtr"}
            console.log("first =", first)       // first = firstStr
            console.log("second =", second)     // second = secondtr
            console.log("third =", third)       // third = undefined

            // 1.5 解构时，设置别名
            let {aaa:alias01, bbb:alias02} = {"aaa":1111, "bbb":222, "third":33333};
            console.log("alias01 =", alias01)   // alias01 = 1111
            console.log("alias02 =", alias02)   // alias02 = 222
            // console.log("aaa =", aaa)        // aaa无法使用
            // console.log("bbb =", bbb)        // bbb无法使用

            // 1.6 对象属性的深度遍历
            let {p1:{p2:v}} = {p1:{p2:'abcd'}};
            console.log( 'v = ' + v);  // v = abcd

            // 2. 数组的解构
            // 2.1 完全匹配
            let [a, b] = [1, 2]
            console.log("a =", a)
            console.log("b =", b)

            // 2.2 部分匹配
            let [c, d] = [5, 6, 7, 8, 9]
            console.log("c =", c)
            console.log("d =", d)

            // 2.3 变量过多，无法匹配 g，则不赋值
            let [e, f, g] = [10, 11]
            console.log("e =", e)
            console.log("f =", f)
            console.log("g =", g)

            // 2.4 跳过某个元素
            let [h, , j] = [12, 13, 14]
            console.log("h =", h)       // j = 14
            console.log("j =", j)       // h = 12
            
            // 2.5用三点运算符来捕获多余的元素
            let [x, y, ...more] = [3, 4, 5, 6, 7, 8]
            console.log("x =", x)       // x = 3
            console.log("y =", y)       // y = 4
            console.log("more =", more)       // more = [5, 6, 7, 8]

            // 3. 函数的对象类型参数解构
            // 使用解构的格式作为形参
            function show({name, age, address: addr}){
                console.log("name =", name)
                console.log("age =", age)
                console.log('address=', addr)
            }

            var obj = {name: "objName", age:30, address:'asdfghhjk'}
            // 不需要依次调用对象的属性，直接将对象作为实参传递
            show(obj)
            // 输出:
            // name = objName
            // age = 30
            // address= asdfghhjk

            var obj = {name: "objName02", age:40}
            show(obj.name, obj.age, obj.address)
        </script>
    </head>
    <body>
    </body>
</html>
